{% extends 'base.html' %}

{% block title %}Rehearsals{% endblock %}

{% block content %}
<div class="container">
    <h2 class="mt-4">Ensayos</h2>
    <p>Acá encontrarás una lista de los ensayos agendados. Haz clic en algún ensayo para ver más detalles o seleccionar la fecha definitiva.</p>

    <ul class="list-group mt-3">
        {% for rehearsal in rehearsals %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {% if rehearsal.id %}
                    <div>
                        <a href="{% url 'rehearsal_detail' rehearsal.id %}" class="text-decoration-none">
                            <strong>{{ rehearsal.date_option_1 }}</strong> - {{ rehearsal.location }}
                        </a>
                        <p class="mb-0"><small>Participantes: {{ rehearsal.participants.all|join:", " }}</small></p>
                    </div>
                    <a href="{% url 'select_date' rehearsal.id %}" class="btn btn-sm btn-primary">Selecciona tu fecha</a>
                {% else %}
                    <span class="text-muted">Ensayo inválido</span>
                {% endif %}
            </li>
        {% empty %}
            <li class="list-group-item text-muted">No hay ensayos agendados.</li>
        {% endfor %}
    </ul>

    <div class="mt-4">
        <a href="{% url 'create_rehearsal' %}" class="btn btn-success">Agenda un nuevo ensayo</a>
    </div>
</div>
{% endblock %}
